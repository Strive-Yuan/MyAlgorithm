##                                       io精讲笔记

### 一.操作系统宏观介绍

   1.  **程序不能直接访问硬件，要通过系统调用**

   2. **（宏观维度）io比较重要的一些东西: cpu ，内存 ，io设备，磁盘 ，网卡**

   3. **（程序维度）kernel(内核) app(用户程序)**

      **  每个程序都是逻辑的 线性的地址，程序通过内核的系统调用获取数据**

   4. **vfs：**（虚拟文件系统） -- 目录树

      树上的每个节点可以映射到不同的物理位置，

      vfs的inode 文件（可以理解为id） 如何访问数据

   5. **pagecache：**  默认4K大小

      两个程序同时打开一个文件读取时，pageCache是一份，是共享的。

      dirty(脏的) ：pageCache已经被缓存了，当这个pageCache被修改后，这个pageCache就会标记成脏

   6. **flush(刷写)：**

      配置：

   7. **fd：** 文件描述符 ---->指针 seek   描述了打开文件的一些具体信息，偏移 指针

### 二.虚拟文件系统

​      冯诺依曼结构：计算器， 控制器，主存储器， 输入输出设备

1. **文件类型**

   -：普通文件（可以是可执行的，可以是图片，可以是文本）

   d：目录

   l：链接（分为软连接和硬链接）

   ​     ln: 硬链接   stat  可以看到某文件的源数据信息 看Inode号（理解为将一个文件增加一个引用）

   ​     ln -s：软连接

   b：块设备(如果可以从一个设备读数据可以来回自由的读，不受约束就是一个块设备，比如 硬盘)

   c：字符设备 CHR（如果读的时候读不到过去的有很多约束,需要编解码或驱动的约束，就是字符设备，比如 键盘）

   s：socket

   p: pipeline 管道

   [eventpoll]：这个文件的类型就是内核提供的epoll的区域

   。。。。。。。

     lsof命令： 可以显示进程打开了那些文件

   0标准输入 1标砖输出 2报错输出

2. 

